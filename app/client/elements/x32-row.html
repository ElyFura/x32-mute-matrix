<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../bower_components/polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="x32-channel.html">

<dom-module id="x32-row">
	<template>
		<style>
			:host {
				display: block;
				position: relative;
				height: 38px;
				contain: layout style size;
				@apply --layout-horizontal;
			}

			#label {
				width: 160px;
				border: 2px solid var(--x32-row-color, white);
				color: var(--x32-row-color, white);
				background: black;
				font-weight: 600;
				padding: 0 8px;
				margin: 3px;
				margin-left: 0;
				box-sizing: border-box;
				white-space: nowrap;
				will-change: opacity;
				@apply --layout-horizontal;
				@apply --layout-center;
				@apply --layout-justified;
			}

			#label-label {
				overflow: hidden;
				text-overflow: ellipsis;
				@apply --layout-flex;
			}

			#label-num {
				margin-left: 6px;
				@apply --layout-flex-none;
			}

			x32-channel:nth-of-type(32) {
				margin-right: 9px;
			}
		</style>

		<div id="label">
			<span id="label-label">[[bus.label]]</span>
			<span id="label-num">[[_calcDisplayIndex(bus.name)]]</span>
		</div>

		<template is="dom-repeat" items="[[bus.channels]]" as="channel" index-as="channelIndex">
			<x32-channel
				channel="[[channel]]"
				index="[[channelIndex]]"
				darken="[[_calcDarken(highlightRow, highlightColumn, index, channelIndex)]]"
				on-toggle="_handleChannelToggle"
				on-mousedown="_handleChannelToggle"
				on-mouseenter="_handleChannelMouseEnter"
				on-mouseleave="_handleChannelMouseLeave">
			</x32-channel>
		</template>
	</template>

	<script src="x32-row.js"></script>
</dom-module>
